<div class="content-body">
    <!-- Breadcrumb  -->
    <app-breadcrumb [breadcrumb]="breadcrumbList"> </app-breadcrumb>

    <div class="container-fluid">
        <div class="row">
            <div class="col-xxl-9 col-xl-8">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="card">
                            <div class="card-body p-0">
                                <!-- employees List -->
                                <app-employees-list [offset_limit]="5"></app-employees-list>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-12">
                        <div class="card">
                            <div class="card-body p-0">
                                <div class="table-responsive active-projects style-1 attendance-tbl">
                                <div class="tbl-caption">
                                    <h4 class="heading mb-0">Attendance</h4>
                                    <div>
                                        <!-- Button trigger modal -->
                                        <button type="button" class="btn btn-primary btn-sm" (click)="openCenter(exampleModal)"> 
                                        + Mark Attendance
                                        </button>
                                        <!-- modal -->
                                        <ng-template #exampleModal let-modal>
                                            <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Add Attendance</h1>
                                                <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="row">
                                                    <div class="col-xl-12">
                                                        <label class="form-label">Employee<span class="text-danger">*</span></label>
                                                        <select class="default-select form-control">
                                                            <option  data-display="Select">Please select</option>
                                                            <option value="html">Julia Koch</option>
                                                            <option value="css">Gina Reinhart</option>
                                                            <option value="javascript">Yang Huiyan</option>
                                                        </select>
                                                        <label class="form-label mt-3">Attendance Date<span class="text-danger">*</span></label>
                                                        <input class="form-control" type="date">
                                                        <div class="row">
                                                            <div class="col-xl-6">
                                                                <label class="form-label mt-3">In Time<span class="text-danger">*</span></label>
                                                                <div class="input-group clockpicker">
                                                                    <input type="text" class="form-control" value="09:30"><span class="input-group-text"><i
                                                                                class="fas fa-clock"></i></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <label class="form-label mt-3">Out Time<span class="text-danger">*</span></label>
                                                                <div class="input-group clockpicker">
                                                                    <input type="text" class="form-control" value="10:30"><span class="input-group-text"><i
                                                                                class="fas fa-clock"></i></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-danger light" data-bs-dismiss="modal">Close</button>
                                            <button type="button" class="btn btn-primary">Save changes</button>
                                        </div>
                                        </ng-template>
                                    </div>
                                </div>
                                <div class="dataTables_wrapper">
                                    <table id="attendance-tbl" class="table mb-0" matSort (matSortChange)="sortData($event)">
                                        <thead>
                                            <tr>
                                                <th mat-sort-header="name">Employee Name</th>
                                                <th>
                                                    <span>1</span>
                                                    <p>MO</p>
                                                </th>
                                                <th>
                                                    <span>2</span>
                                                    <p>Tu</p>
                                                </th>
                                                <th>
                                                    <span>3</span>
                                                    <p>We</p>
                                                </th>
                                                <th>
                                                    <span>4</span>
                                                    <p>Th</p>
                                                </th>
                                                <th>
                                                    <span>5</span>
                                                    <p>Fr</p>
                                                </th>
                                                <th>
                                                    <span>6</span>
                                                    <p>Sa</p>
                                                </th>
                                                <th>
                                                    <span>7</span>
                                                    <p>MO</p>
                                                </th>
                                                <th>
                                                    <span>8</span>
                                                    <p>Tu</p>
                                                </th>
                                                <th>
                                                    <span>9</span>
                                                    <p>We</p>
                                                </th>
                                                <th>
                                                    <span>10</span>
                                                    <p>Th</p>
                                                </th>
                                                <th>
                                                    <span>11</span>
                                                    <p>Fr</p>
                                                </th>
                                                <th>
                                                    <span>12</span>
                                                    <p>Sa</p>
                                                </th>
                                                <th>
                                                    <span>13</span>
                                                    <p>MO</p>
                                                </th>
                                                <th>
                                                    <span>14</span>
                                                    <p>Tu</p>
                                                </th>
                                                <th>
                                                    <span>15</span>
                                                    <p>We</p>
                                                </th>
                                                <th>
                                                    <span>16</span>
                                                    <p>Th</p>
                                                </th>
                                                <th>
                                                    <span>17</span>
                                                    <p>Fr</p>
                                                </th>
                                                <th>
                                                    <span>18</span>
                                                    <p>Sa</p>
                                                </th>
                                                <th>
                                                    <span>19</span>
                                                    <p>MO</p>
                                                </th>
                                                <th>
                                                    <span>20</span>
                                                    <p>Tu</p>
                                                </th>
                                                <th>
                                                    <span>21</span>
                                                    <p>We</p>
                                                </th>
                                                <th>
                                                    <span>22</span>
                                                    <p>Th</p>
                                                </th>
                                                <th>
                                                    <span>23</span>
                                                    <p>Fr</p>
                                                </th>
                                                <th>
                                                    <span>24</span>
                                                    <p>Sa</p>
                                                </th>
                                                <th>
                                                    <span>25</span>
                                                    <p>MO</p>
                                                </th>
                                                <th>
                                                    <span>26</span>
                                                    <p>Tu</p>
                                                </th>
                                                <th>
                                                    <span>27</span>
                                                    <p>We</p>
                                                </th>
                                                <th>
                                                    <span>28</span>
                                                    <p>Th</p>
                                                </th>
                                                <th>
                                                    <span>29</span>
                                                    <p>Fr</p>
                                                </th>
                                                <th>
                                                    <span>30</span>
                                                    <p>Sa</p>
                                                </th>
                                                <th>
                                                    <span>31</span>
                                                    <p>MO</p>
                                                </th>
                                                <th mat-sort-header="total" class="text-center">
                                                    <span>Total</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @for(item of allData.data; track item){
                                            <tr>
                                                <td>
                                                    <div class="products">
                                                        <img src="{{ item.image }}" class="avatar avatar-md" alt="">
                                                        <div>
                                                            <h6>{{ item.name }}</h6>
                                                            <span>{{ item.position }}</span>	
                                                        </div>	
                                                    </div>
                                                </td>
                                                <td *ngFor="let attend of item.attendance; trackBy: trackByAttendance">
                                                    <ng-container *ngIf="attend === 'a'; else present">
                                                        <span class="text-danger"><i class="fa-regular fa-xmark"></i></span>
                                                    </ng-container>
                                                    <ng-template #present>
                                                        <span class="text-success"><i class="fa-solid fa-check"></i></span>
                                                    </ng-template>
                                                </td>
                                                <td class="text-center"><span>{{ item.total }}</span></td>
                                            </tr>
                                            }
                                        </tbody>
                                    </table>
                                    <div class="dataTables_info" id="example5_info" role="status" aria-live="polite">Showing {{page}} to
                                        {{totalRows}} of {{ allData.total }} entries</div>
                                    <div class="dataTables_paginate paging_simple_numbers pt-2">
                                    <app-pagination [totalPage]="totalPage" [page]="page" (newPage)="pageChange($event)"></app-pagination>
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-3 col-xl-4">
                <div class="row">
                    <div class="col-xl-12 col-md-6">
                        <div class="card h-auto">
                            <div class="card-header pb-0 border-0">
                                <h4 class="heading mb-0">Attendance</h4>
                                <app-dropdown [dropdown]="dropdown_item"></app-dropdown>
                            </div>
                            <div class="card-body">
                                <div id="projectChart" class="project-chart"><app-bar-chart-apex [chart_item]="projectChart"></app-bar-chart-apex></div>
                                <div class="project-date">
                                    <div class="project-media">
                                        <p class="mb-0">
                                            <svg class="me-2" width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect y="0.5" width="12" height="12" rx="3" fill="var(--primary)"/>
                                            </svg>
                                            Completed Projects
                                        </p>
                                        <span>125 Projects</span>
                                    </div>	
                                    <div class="project-media">
                                        <p class="mb-0">
                                            <svg class="me-2" width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect y="0.5" width="12" height="12" rx="3" fill="#3AC977"/>
                                            </svg>
                                            Progress Projects
                                        </p>
                                        <span>125 Projects</span>
                                    </div>
                                    <div class="project-media">
                                        <p class="mb-0">
                                            <svg class="me-2" width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect y="0.5" width="12" height="12" rx="3" fill="#FF5E5E"/>
                                            </svg>
                                            Cancelled
                                        </p>
                                        <span>125 Projects</span>
                                    </div>
                                    <div class="project-media">
                                        <p class="mb-0">
                                            <svg class="me-2" width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect y="0.5" width="12" height="12" rx="3" fill="#FF9F00"/>
                                            </svg>
                                            Yet to Start 
                                        </p>
                                        <span>125 Projects</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-12 col-md-6">
                        <div class="card">
                            <div class="card-header border-0">
                                <h4 class="heading mb-0">Upcoming Holidays</h4>
                            </div>
                            <app-upcoming-colander></app-upcoming-colander>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
